======================
Pulp 2.3 Release Notes
======================

Pulp 2.3.0
==========

New Features
------------

-  Repository sync and publish history is now available. See
   ``pulp-admin repo history --help`` for details, or see the developer guide
   for how to retrieve these via the REST API.

-  Qpid SSL Certificates generated by the pulp-qpid-ssl-cfg script are no longer world readable.  It is
   recommended that existing installations are updated manually.  If the default locations were used the
   following changes would be be needed.

   -  chmod 640 /etc/pki/pulp/qpid/\*.crt
   -  chgrp apache /etc/pki/pulp/qpid/\*.crt
   -  chmod 640 /etc/pki/pulp/qpid/nss/*
   -  chgrp qpidd /etc/pki/pulp/qpid/nss/*

-  OAuth authentication is enabled by default using generated credentials.

-  The out-of-the-box CA (Certificate Authority) used by Pulp to sign and validate user login is generated
   during installation. Previously, the SSL private key and certificate were installed from the
   git repository. This means that each installation initially had the same key and certificate
   installed, although any production deployments should have been configured to use a custom CA.
   In 2.3, the CA key stored at ``/etc/pki/pulp/ca.key`` and certificate stored
   at ``/etc/pki/pulp/ca.crt`` will be uniquely generated for each install. The key and certificate
   are **not** updated during RPM upgrade. Users upgrading to 2.3 who chose not to
   deploy their own CA are encouraged to generate a new (unique) CA key and certificate
   by running: `pulp-gen-ca-certificate` as root. Then, restart httpd. pulp-admin
   users will need to login again.

.. note:: It is strongly recommended that Pulp deployments use custom CA certificates.

New Node Features
-----------------

-  Users can now limit the bandwidth and number of connections used during a sync.

-  The authentication method used by *Nodes* has been changed to OAuth. Users upgrading Pulp
   servers that are functioning as child *Nodes* will need to update a new *Nodes* configuration
   file as specified in :doc:`../nodes` section of this user guide.

Bugs
----

You can see the complete list of over 100 bugs that were
`fixed in Pulp 2.3.0 <https://bugzilla.redhat.com/buglist.cgi?bug_status=VERIFIED&classification=Community&list_id=1927252&product=Pulp&query_format=advanced&target_release=2.3.0>`_.

REST API Changes
----------------

-  The consumer applicability API is vastly different and performs much faster.
   Please see the developer guide for details on the new API.

Internal API Changes
--------------------

-  Importers no longer pass the related repositories to the validate_config(...) method.

-  Distributors now pass a pulp.plugins.conduits.repo_config.RepoConfigConduit instead of the related
   repositories to the validate_config(...) method.  The RepoConfigConduit is used to provide
   methods for performing the kind of cross repository searching & validation that formerly had to be done
   manually by comparing the configuration of each related repository.

Upgrade Instructions for 2.2.x --> 2.3.0
----------------------------------------

To upgrade to the new Pulp release from version 2.2.x, you should begin by using yum to install the latest RPMs
from the Pulp repository and run the database migrations::

   $ sudo yum upgrade
   $ sudo pulp-manage-db


Pulp 2.3.1
==========

Bugs Fixed
----------

The ``pulp-qpid-ssl-cfg`` tool :bz:`displayed an incorrect path <1039619>`
to the qpid configuration file.

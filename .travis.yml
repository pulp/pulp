sudo: required
# https://docs.travis-ci.com/user/trusty-ci-environment/
dist: trusty
language: python
python:
    # python versions used in el7 SCL & supported fedora
    - "3.5"
    - "3.6"
env:
  - DJANGO_MIN=1.11.1 DJANGO_MAX=2.0 DB=sqlite TEST=pulp
  - DJANGO_MIN=1.11.1 DJANGO_MAX=2.0 DB=sqlite TEST=pulp_file
  - DJANGO_MIN=1.11.1 DJANGO_MAX=2.0 DB=postgres TEST=pulp
  - DJANGO_MIN=1.11.1 DJANGO_MAX=2.0 DB=postgres TEST=pulp_file
  - DJANGO_MIN=2.0 DJANGO_MAX=3.0 DB=sqlite TEST=pulp
  - DJANGO_MIN=2.0 DJANGO_MAX=3.0 DB=sqlite TEST=pulp_file
  - DJANGO_MIN=2.0 DJANGO_MAX=3.0 DB=postgres TEST=pulp
  - DJANGO_MIN=2.0 DJANGO_MAX=3.0 DB=postgres TEST=pulp_file
  - TEST=docs
matrix:
  fast_finish: true
  allow_failures:
    - python: "3.5"
      env: DJANGO_MIN=1.11.1 DJANGO_MAX=2.0 DB=sqlite TEST=pulp_file
    - python: "3.5"
      env: DJANGO_MIN=1.11.1 DJANGO_MAX=2.0 DB=postgres TEST=pulp_file
    - python: "3.5"
      env: DJANGO_MIN=2.0 DJANGO_MAX=3.0 DB=sqlite TEST=pulp_file
    - python: "3.5"
      env: DJANGO_MIN=2.0 DJANGO_MAX=3.0 DB=postgres TEST=pulp_file
    - python: "3.6"
      env: DJANGO_MIN=1.11.1 DJANGO_MAX=2.0 DB=sqlite TEST=pulp_file
    - python: "3.6"
      env: DJANGO_MIN=1.11.1 DJANGO_MAX=2.0 DB=postgres TEST=pulp_file
    - python: "3.6"
      env: DJANGO_MIN=2.0 DJANGO_MAX=3.0 DB=sqlite TEST=pulp_file
    - python: "3.6"
      env: DJANGO_MIN=2.0 DJANGO_MAX=3.0 DB=postgres TEST=pulp_file
addons:
    # postgres versions provided by el7 RHSCL (lowest supportable version)
    postgresql: "9.5"
services:
    - postgresql
    - rabbitmq
install: source .travis/install.sh
before_script: source .travis/before_script.sh
script: source .travis/script.sh
after_success: coveralls
